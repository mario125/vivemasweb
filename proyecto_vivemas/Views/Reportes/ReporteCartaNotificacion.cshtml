
@{
    ViewBag.Title = "ReporteCartaNotificacion";
}

<h2>ReporteCartaNotificacion</h2>

@{
    Layout = "~/Views/Shared/_LayoutMenu.cshtml";
    ViewBag.Title = "ReporteCartaNotificacion";
}
@section styles{
    <link href="~/Content/jquery-ui/css/jquery-ui.min.css" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="~/Content/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/css/style.css">

    <link href="~/Css/Separaciones/Index.css" rel="stylesheet">

}

<div class="row">
    <div class="col-12 ">
        <div class="card">
            <div class="card-header">
                Pagos vencidos
            </div>
            <div class="card-body">
                <div class="mario" id="mario" style="overflow: scroll; height: 100%; width: 100%;">
                    <table id="maintable" class="mario  maintable display compact cell-border" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>CONTRATO</th>
                                <th>PROYECTO</th>
                                <th>LOTE</th>
                                <th>CLIENTE</th>
                                <th>DOCUMENTO</th>
                                <th>MONTO PENDIENTE</th>
                                <th>MONTO CANCELADO</th>
                                <th>VENCIDAS</th>
                                <th>CARTA</th>
                            </tr>
                        </thead>

                        <tfoot style="background-color: #c0c0c0; color: #ffffff; font-size: 0.9em; ">
                            <tr>
                                <th>CONTRATO</th>
                                <th>PROYECTO</th>
                                <th>LOTE</th>
                                <th>CLIENTE</th>
                                <th>DOCUMENTO</th>
                                <th>MONTO PENDIENTE</th>
                                <th>MONTO CANCELADO</th>
                                <th>VENCIDAS</th>
                                <th>CARTA</th>
                            </tr>
                        </tfoot>
                    </table>

                </div>

            </div>
        </div>
    </div>
</div>
@section scripts{


    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>
    <script type="text/javascript" src="~/Content/js/jquery.mark.min.js"></script>
    <script type="text/javascript" src="~/Content/js/datatables.mark.js"></script>
    <script type="text/javascript" src="~/Content/js/buttons.colVis.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {

            var table = $('#maintable').DataTable({

                "ajax": {
                    "url": "getCuotasVencidas",
                    "type": "POST"
                },
                "columns": [
                    { "data": "contrato_numeracion" },
                    { "data": "proyecto_nombre" },
                    { "data": "lote_nombre" },
                    { "data": "proformauif_cliente_razonsocial" },
                    { "data": "proformauif_cliente_nrodocumento" },
                    { "data": "montopendiente" },
                    { "data": "montocancelado" },
                    { "data": "cuotas_vencidas" },
                    {
                        "data": function (data, type, row) {
                            if (data.cuotas_vencidas>=3) {
                                return '<button type="button" class="btn btn-success"  onclick="abrirModalEdicionTransaccion(' + data.cuota_anexocontratocotizacion_id + ') ">Notificar</button>'
                            } else {
                                return ''
                            }
                           
                        }
                    }

                ],
                "dom": 'Bfrtip',
                "buttons": [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ]

            });

            $('#maintable tfoot th').each(function () {
                var title = $('#maintable tfoot th').eq($(this).index()).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            table.columns().eq(0).each(function (colIdx) {
                $('input', table.column(colIdx).footer()).on('keyup change', function () {
                    table
                        .column(colIdx)
                        .search(this.value)
                        .draw();
                });
            });
        });

        const abrirModalEdicionTransaccion = (transaccionId) => {
            alert(transaccionId);
            //cargarDatosTransaccion(transaccionId);
           
        }
    </script>




}



